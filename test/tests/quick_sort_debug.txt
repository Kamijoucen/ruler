

fun partition(arr, begin, end) {

    println("-----------", begin, end);

    base = arr[begin];

    while begin < end {

        while begin < end && arr[end] >= base {
            end = end - 1;
        }

        println(begin, end);
        arr[begin] = arr[end];

        while begin < end && arr[begin] <= base {
            begin = begin + 1;
        }
        println(end, begin);
        arr[end] = arr[begin];
    }

    arr[begin] = base;

    return begin;
}

fun sort(subArr, begin, end) {
    if begin >= end {
        return;
    }
    p = partition(subArr, begin, end);
    println("out", begin, end);
    sort(subArr, begin, p - 1);
    sort(subArr, p + 1, end);
}

len = 6;

arr2 = [1, 5, 4, 3, 2, 6];

println(arr2);

sort(arr2, 0, len - 1);

println(arr2);